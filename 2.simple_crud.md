# 2 간단한 게시판 기능 구현

Flask를 활용하여 간단한 게시판 기능을 구현하는 튜토리얼을 단계별로 안내해드리겠습니다. 이 튜토리얼에서는 프로젝트 구조 설계부터 게시글 작성 및 조회 기능까지 다룹니다.

## 1. 프로젝트 구조 설계

먼저, Flask 애플리케이션의 기본 디렉터리 구조를 설정합니다.

```
my_flask_app/
├── app.py
├── templates/
│   ├── layout.html
│   ├── index.html
│   └── post.html
└── static/
    ├── style.css
```

- `app.py`: Flask 애플리케이션의 메인 파일입니다.
- `templates/`: HTML 템플릿 파일들을 저장하는 디렉터리입니다.
- `static/`: CSS, JavaScript, 이미지 등 정적 파일들을 저장하는 디렉터리입니다.

## 2. 게시글 작성 기능 구현

게시글을 작성하고 저장하는 기능을 구현합니다.

### 2.1. 데이터베이스 설정

게시글을 저장하기 위해 SQLite 데이터베이스를 사용합니다.

```python
# app.py
from flask import Flask, render_template, request, redirect, url_for
from flask_sqlalchemy import SQLAlchemy
from datetime import datetime

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///posts.db'
db = SQLAlchemy(app)

class Post(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(100), nullable=False)
    content = db.Column(db.Text, nullable=False)
    date_posted = db.Column(db.DateTime, default=datetime.utcnow)

    def __repr__(self):
        return f"Post('{self.title}', '{self.date_posted}')"

if __name__ == "__main__":
    app.run(debug=True)
```


위 코드는 Flask 애플리케이션을 설정하고, SQLAlchemy를 사용하여 `Post` 모델을 정의합니다.

### 2.2. 게시글 작성 폼 생성

사용자가 게시글을 작성할 수 있는 폼을 생성합니다.

```html
<!-- templates/create_post.html -->
{% extends 'layout.html' %}

{% block content %}
  <h2>새 게시글 작성</h2>
  <form method="POST" action="{{ url_for('create_post') }}">
    <label for="title">제목:</label>
    <input type="text" id="title" name="title" required>
    <label for="content">내용:</label>
    <textarea id="content" name="content" required></textarea>
    <button type="submit">작성</button>
  </form>
{% endblock %}
```


`create_post.html` 템플릿은 게시글의 제목과 내용을 입력받는 폼을 제공합니다.

### 2.3. 폼 데이터 처리 및 서버에 저장

폼에서 입력된 데이터를 받아 데이터베이스에 저장하는 라우트를 추가합니다.

```python
# app.py
@app.route("/create", methods=['GET', 'POST'])
def create_post():
    if request.method == 'POST':
        title = request.form['title']
        content = request.form['content']
        new_post = Post(title=title, content=content)
        try:
            db.session.add(new_post)
            db.session.commit()
            return redirect(url_for('index'))
        except:
            return "게시글 저장 중 오류가 발생했습니다."
    else:
        return render_template('create_post.html')
```


`/create` 경로에서 GET 요청 시 게시글 작성 폼을 표시하고, POST 요청 시 입력된 데이터를 데이터베이스에 저장한 후 메인 페이지로 리다이렉트합니다.

## 3. 게시판 조회 기능 구현

저장된 게시글을 목록으로 표시하고, 각 게시글의 상세 내용을 볼 수 있는 기능을 구현합니다.

### 3.1. 게시글 목록 표시

메인 페이지에서 모든 게시글의 제목과 작성 날짜를 목록으로 표시합니다.

```python
# app.py
@app.route("/")
def index():
    posts = Post.query.order_by(Post.date_posted.desc()).all()
    return render_template('index.html', posts=posts)
```

```html
<!-- templates/index.html -->
{% extends 'layout.html' %}

{% block content %}
  <h1>게시판</h1>
  <a href="{{ url_for('create_post') }}">새 게시글 작성</a>
  <ul>
    {% for post in posts %}
      <li>
        <a href="{{ url_for('post_detail', post_id=post.id) }}">{{ post.title }}</a>
        <small>{{ post.date_posted.strftime('%Y-%m-%d %H:%M:%S') }}</small>
      </li>
    {% endfor %}
  </ul>
{% endblock %}
```


`index.html` 템플릿은 게시글 목록을 표시하며, 각 제목을 클릭하면 해당 게시글의 상세 페이지로 이동합니다.

### 3.2. 게시글 상세 페이지 구현

각 게시글의 제목, 내용, 작성 날짜를 표시하는 상세 페이지를 구현합니다.

```python
# app.py
@app.route("/post/<int:post_id>")
def post_detail(post_id):
    post = Post.query.get_or_404(post_id)
    return render_template('post.html', post=post)
```

```html
<!-- templates/post.html -->
{% extends 'layout.html' %}

{% block content %}
  <h2>{{ post.title }}</h2>
  <p>{{ post.content }}</p>
  <small>{{ post.date_posted.strftime('%Y-%m-%d %H:%M:%S') }}</small>
  <br>
  <a href="{{ url_for('index') }}">뒤로 가기</a>
{% endblock %}
```


`post.html` 템플릿은 선택한 게시글의 상세 정보를 표시합니다.

## 4. 데이터베이스 초기화

애플리케이션을 처음 실행하기 전에 데이터베이스와 테이블을 생성해야 합니다.

```python
# app.py
if __name__ == "__main__":
    with app.app_context():
        db.create_all()
    app.run(debug=True)
```


위 코드는 애플리케이션 컨텍스트 내에서 `create_all()` 메서드를 호출하여 데이터베이스와 